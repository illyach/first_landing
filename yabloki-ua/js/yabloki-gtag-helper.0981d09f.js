!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/build/yabloki/",i(i.s="K5cq")}({K5cq:function(e,t,i){"use strict";i.r(t);class n{constructor({item_id:e,item_name:t,affiliation:i,payment_type:n,coupon:r,currency:a,creative_name:o,creative_slot:c,discount:d,index:s,item_brand:u,item_category:m,item_category_2:p,item_category_3:_,item_category_4:l,item_category_5:y,item_list_id:f,item_list_name:h,item_variant:g,location_id:v,price:w,promotion_id:b,promotion_name:q,quantity:L}){this.item_id=e,this.item_name=t,this.affiliation=i,this.payment_type=n,this.coupon=r,this.currency=a,this.creative_name=o,this.creative_slot=c,this.discount=d,this.index=s,this.item_brand=u,this.item_category=m,this.item_category_2=p,this.item_category_3=_,this.item_category_4=l,this.item_category_5=y,this.item_list_id=f,this.item_list_name=h,this.item_variant=g,this.location_id=v,this.price=w,this.promotion_id=b,this.promotion_name=q,this.quantity=L}}function r(e){return new n({item_name:e.name,item_id:e.id,price:e.price.replace(/\.[^.]*$/,""),item_brand:e.brand,item_category:e.category,item_category_2:e.category_2,item_list_name:"Search Results",index:parseInt(e.position),quantity:parseInt(e.quantity)})}function a(e){return new n({item_name:e.name,item_id:e.id,price:e.price.replace(/\.[^.]*$/,""),item_brand:e.brand,item_category:e.category,item_category_2:e.category_2,item_list_name:"Search Results",index:parseInt(e.position),quantity:parseInt(e.quantity)})}function o(e,t=null,i=null){return new n({item_id:e.sku,affiliation:null!==t?t:"transaction",payment_type:i||void 0,item_name:e.productName,price:e.price.replace(/\.[^.]*$/,""),item_category:e.taxon,item_variant:e.tariff,item_list_name:"List 1",index:parseInt(e.position),item_brand:"",quantity:parseInt(e.quantity),currency:e.currencyCode})}function c(e){return new n({item_id:e.id,item_name:e.name,price:e.price.replace(/\.[^.]*$/,""),item_category:e.category,item_category_2:e.category_2,item_category_3:e.category_3,item_variant:e.variant,item_list_name:"Search Results",index:parseInt(e.position),item_brand:e.brand,quantity:parseInt(e.quantity)})}function d(e){return new n({item_name:e.name,item_id:e.id,price:e.price.replace(/\.[^.]*$/,""),item_brand:e.brand,item_category:e.category,item_list_name:"Search Results",index:parseInt(e.position),quantity:parseInt(e.quantity)})}function s(e){return new n({item_name:e.name,item_id:e.id,price:e.price.replace(/\.[^.]*$/,""),item_brand:e.brand,item_category:e.category,item_category_2:e.category_2,item_list_name:"Search Results",index:parseInt(e.position),quantity:parseInt(e.quantity)})}class u{constructor({transaction_id:e,affiliation:t,payment_type:i,value:n,tax:r,shipping:a,currency:o,coupon:c,items:d}){this.transaction_id=e,this.affiliation=t||"transaction",this.payment_type=i||"cash",this.value=n,this.tax=r,this.shipping=a,this.currency=o,this.coupon=c,this.items=d}}function m(e,t){const i=t?"preorder":"transaction",n=t||null===e.paymentMethod?"cash":e.paymentMethod;return new u({transaction_id:e.id,payment_type:n,affiliation:i,value:parseInt(e.total),coupon:e.promoCode||null,currency:e.currencyCode||"UAH",items:e.items.map(e=>o(e,i,n))})}const p=()=>{const e=window.productsOnPage.filter(e=>null!==e);e.length&&function(e){dataLayer.push({event:"view_item_list",ecommerce:{items:e.map(e=>o(e))}})}(e)},_=(e=0)=>e?window.productsOnPage[e]:Object.values(window.productsOnPage)[e],l=e=>{_(e)&&function(e){const t=dataLayer.find(e=>"viewport"===e.event);t?t.ecommerce.items.push(c(e)):dataLayer.push({event:"viewport",ecommerce:{items:[c(e)]}})}(_(e))},y=e=>{var t;_(e)&&(t=_(e),dataLayer.push({event:"select_item",ecommerce:{items:[a(t)]}}))},f=()=>{var e;_()&&(e=_(),dataLayer.push({event:"view_item",ecommerce:{items:[s(e)]}}))},h=e=>{_(e)&&function(e){const t=dataLayer.find(e=>"add_to_cart"===e.event);t?t.ecommerce.items.push(r(e)):dataLayer.push({event:"add_to_cart",ecommerce:{currencyCode:"UAH",items:[r(e)]}})}(_(e))},g=e=>{_(e)&&function(e){const t=dataLayer.find(e=>"remove_from_cart"===e.event);t?t.ecommerce.items.push(d(e)):dataLayer.push({event:"remove_from_cart",ecommerce:{items:[d(e)]}})}(_(e))},v=e=>{!function(e){dataLayer.push({event:"purchase",ecommerce:m(e,!1)})}(e)},w=e=>{!function(e){dataLayer.push({event:"purchase",ecommerce:m(e,!0)})}(e)};window.addEventListener("load",(function(){!function(){window.dataLayer=window.dataLayer||[],window.orderOnPage&&"whitepay"!==window.orderOnPage.paymentMethod?v(window.orderOnPage):p(),window.preorderOnPage&&w(window.preorderOnPage),document.addEventListener("order:finished",(function(e){v(e.detail.order)})),document.querySelector(".product-full-page")&&f();const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&l(e.target.dataset.productId)})},{threshold:.7}),t=document.querySelectorAll(".catalog-products .product-catalog-link");t.length&&t.forEach(t=>{t.dataset.productId&&(e.observe(t),t.addEventListener("click",()=>y(t.dataset.productId)))}),document.addEventListener("click",e=>{const t=e.target.closest(".button-add-to-cart"),i=e.target.closest(".shopping-card .close-icon-wrapper");if(i){const e=i.closest(".shopping-card");e.dataset.productId&&g(e.dataset.productId)}t&&t.dataset.productId&&h(t.dataset.productId)})}()}));const b=document.querySelector("#order-create-current-order-submit"),q=document.querySelector("#order-delivery-payment-full-submit");window.orderOnPage&&b&&(window.dataLayer=window.dataLayer||[],b.addEventListener("click",(function(){const e=document.querySelector(".payment-variant.btn-additional-secondary");if(!e)return;"whitepay"===e.closest("label").querySelector('input[type="radio"]').value&&v(window.orderOnPage)}))),window.orderOnCheckoutPage&&q&&(window.dataLayer=window.dataLayer||[],q.addEventListener("click",(function(){const e=document.querySelector(".payment-variant.btn-additional-secondary");if(!e)return;"8"===e.closest("label").querySelector('input[type="radio"]').value&&v(window.orderOnCheckoutPage)})))}});